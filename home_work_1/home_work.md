–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è AnyLogic Cloud API —Å –¥–µ–º–æ-–º–æ–¥–µ–ª—å—é —á–µ—Ä–µ–∑ FastAPI –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –∫–ª—é—á. –í–æ—Ç –ø–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ.

### üß™ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ API-–∫–ª—é—á–∞

–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–µ–º–æ-–º–æ–¥–µ–ª–∏ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π AnyLogic —Ç–µ—Å—Ç–æ–≤—ã–π –∫–ª—é—á.

- **API-–∫–ª—é—á**: `e05a6efa-ea5f-4adf-b090-ae0ca7d16c20`
- **–î–µ–º–æ-–º–æ–¥–µ–ª—å**: –≠—Ç–æ—Ç –∫–ª—é—á –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏ **"Service System Demo"**.

–ò–º–µ–π—Ç–µ –≤ –≤–∏–¥—É, —á—Ç–æ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π API-–∫–ª—é—á –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–∞—à–∏–º–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏ –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –≤–µ—Ä—Å–∏–π AnyLogic Cloud.

### üîß –ü—Ä–∏–º–µ—Ä FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–í–æ—Ç –∫–æ–¥ –ø—Ä–æ—Å—Ç–æ–≥–æ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É AnyLogic Cloud –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –¥–µ–º–æ-–º–æ–¥–µ–ª–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.

```python
from fastapi import FastAPI, HTTPException
from anylogiccloudclient.client.cloud_client import CloudClient

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –∫–ª–∏–µ–Ω—Ç–∞ AnyLogic Cloud
app = FastAPI()
client = CloudClient("e05a6efa-ea5f-4adf-b090-ae0ca7d16c20")

@app.get("/run-simulation/")
async def run_simulation(server_capacity: int = 8):
    """
    –ó–∞–ø—É—Å–∫–∞–µ—Ç –¥–µ–º–æ-–º–æ–¥–µ–ª—å 'Service System Demo' —Å –∑–∞–¥–∞–Ω–Ω—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º 'Server capacity'.
    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–ª—é—á–µ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è.
    """
    try:
        # –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ –º–æ–¥–µ–ª–∏ –ø–æ –∏–º–µ–Ω–∏
        version = client.get_latest_model_version("Service System Demo")
        
        # –°–æ–∑–¥–∞–Ω–∏–µ –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ "Baseline"
        inputs = client.create_inputs_from_experiment(version, "Baseline")
        
        # –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–≤–æ–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ "Server capacity"
        inputs.set_input("Server capacity", server_capacity)
        
        # –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ —Å–∏–º—É–ª—è—Ü–∏–∏
        simulation = client.create_simulation(inputs)
        
        # –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        outputs = simulation.get_outputs_and_run_if_absent()
        
        # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        mean_queue_size = outputs.value("Mean queue size|Mean queue size")
        server_utilization = outputs.value("Utilization|Server utilization")
        
        return {
            "server_capacity": server_capacity,
            "mean_queue_size": mean_queue_size,
            "server_utilization": server_utilization,
            "raw_outputs": outputs.get_raw_outputs()  # –í—Å–µ —Å—ã—Ä—ã–µ –≤—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        }
        
    except Exception as e:
        raise HTTPException(status_code=500, detail=f"–û—à–∏–±–∫–∞ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è: {str(e)}")
```

### üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏. –ö–ª–∏–µ–Ω—Ç AnyLogic Cloud –Ω—É–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å –ø–æ –ø—Ä—è–º–æ–π —Å—Å—ã–ª–∫–µ.

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ FastAPI –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Uvicorn)
pip install "fastapi[standard]"

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ AnyLogic Cloud –¥–ª—è Python
pip install https://cloud.anylogic.com/files/api-8.5.0/clients/anylogiccloudclient-8.5.0-py3-none-any.whl
```

### üöÄ –ó–∞–ø—É—Å–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞

1.  –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–æ–¥ –≤ —Ñ–∞–π–ª, –Ω–∞–ø—Ä–∏–º–µ—Ä, `main.py`.
2.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã:
    ```bash
    fastapi dev main.py
    ```
3.  –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API –ø–æ –∞–¥—Ä–µ—Å—É `http://127.0.0.1:8000/docs`. –í—ã —Å–º–æ–∂–µ—Ç–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç `/run-simulation/` –ø—Ä—è–º–æ –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ Swagger UI, –º–µ–Ω—è—è –ø–∞—Ä–∞–º–µ—Ç—Ä `server_capacity`.

### üí° –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å API

- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –í–æ –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö –∫ REST API –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å API-–∫–ª—é—á –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ `Authorization`. –í –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.
- **–ü–æ–∏—Å–∫ –º–æ–¥–µ–ª–∏**: –í–º–µ—Å—Ç–æ –∂–µ—Å—Ç–∫–æ–≥–æ –ø—Ä–æ–ø–∏—Å—ã–≤–∞–Ω–∏—è ID –º–æ–¥–µ–ª–∏ –∏–ª–∏ –≤–µ—Ä—Å–∏–∏ –≤ –∫–æ–¥–µ —É–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã –≤—Ä–æ–¥–µ `get_latest_model_version("Model Name")`.
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å**: –î–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –≤–∞—à–µ–≥–æ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ,—Å–¥–µ–ª–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π (–∏—Å–ø–æ–ª—å–∑—É—è `async def`), –∫–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –≤ –ø—Ä–∏–º–µ—Ä–µ. –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫—É —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∏–º—É–ª—è—Ü–∏–∏.

### üîÑ –ü—Ä—è–º—ã–µ REST API –∑–∞–ø—Ä–æ—Å—ã

–ü—Ä–∏–º–µ—Ä –≤—ã—à–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–æ—Ç–æ–≤—É—é Python-–±–∏–±–ª–∏–æ—Ç–µ–∫—É, –∫–æ—Ç–æ—Ä–∞—è —É–ø—Ä–æ—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É. –ï—Å–ª–∏ –≤–∞–º –Ω—É–∂–Ω—ã –∏–º–µ–Ω–Ω–æ –ø—Ä—è–º—ã–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã –∫ REST API, –≤–æ—Ç –∫–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:

- **–ë–∞–∑–æ–≤—ã–π URL**: `https://cloud.anylogic.com/api/open/8.5.0`
- **–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**: `Authorization: e05a6efa-ea5f-4adf-b090-ae0ca7d16c20`
- **–û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã**:
    -   `GET /models` - –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –º–æ–¥–µ–ª–µ–π.
    -   `POST /versions/{version-id}/runs` - –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≥–æ–Ω–∞.
    -   `POST /versions/{version-id}/results` - –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.

–ù–∞–¥–µ—é—Å—å, —ç—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É.

https://www.anylogic.com/blog/python-api-for-simulations-in-anylogic-cloud

